# 📘 데이터분석 학습 노트

---

## 📅 2026-01-27
## 📌 데이터베이스의 기본

### 데이터베이스에서 가장 중요한 것
- 데이터베이스에서 핵심은 **SQL 문법이 아니라 ‘관계(Relationship)’ 이해**
- 실무에서 발생하는 SQL 오류의 상당수는  
  → 문법 오류가 아니라 **관계 이해 부족**에서 발생

---

### 관계를 이해하지 못하면 발생하는 실무 문제
- JOIN 후 데이터가 갑자기 **불어남**
- 반대로 데이터가 **사라짐**
- NULL이 생기는 구조를 모르고 필터링하여 정상 데이터가 누락됨
- 결과적으로
  - 지표 왜곡
  - 리포트 누락
  - “SQL은 맞는데 결과가 이상한” 상황 발생

---

### 관계 유형
#### 1️⃣ 1:1 관계
- 거의 드문 구조

#### 2️⃣ 1:N 관계 ⭐ 가장 중요
- 실무에서 가장 많이 사용됨

#### 3️⃣ M:N 관계
- 직접 표현하지 않음
- 반드시 **중계 테이블**로 해소

---

### 핵심 사고 질문
> **이 데이터는 누구에 종속되는가?**

- 고객 기준 데이터인가?
- 주문 기준 데이터인가?
- 상품 기준 데이터인가?

👉 이 질문에 답하지 못하면 JOIN과 집계는 거의 항상 틀어짐

---

## 📌 식별자 (Identifier)

### 식별자의 정의
- “이 데이터가 바로 이것이다”라고 지정할 수 있게 해주는 값
- 하나의 속성 또는 **여러 속성의 조합**으로 구성 가능

---

### 식별자가 없으면 발생하는 문제
- 특정 데이터 조회 불가
- 중복 데이터 구분 불가
- 테이블 간 관계 설정 불가
- 수정·삭제 대상 명확히 지정 불가
- 식별자가 없는 데이터는  
  → **단순히 모여 있는 데이터 덩어리일 뿐**

---

### 엔터티 · 속성 · 식별자 예시
- 엔터티(Entity): 학생
- 속성(Attribute): 이름, 전공
- 식별자(Identifier): 학번

---

### 식별자의 종류

#### 기본키 (PK, Primary Key)
- 각 행을 유일하게 식별하는 대표 식별자
- 조건
  - 유일성 (중복 불가)
  - NULL 불가
  - 최소성

#### 외래키 (FK, Foreign Key)
- 다른 테이블의 PK를 참조
- 테이블 간의 **다리 역할**
- JOIN의 근거

#### 후보키 (Candidate Key)
- 기본키가 될 수 있는 모든 식별자 후보
- 예: 학번, 주민등록번호

---

### 자연키 vs 인조키
- 자연키(Natural Key)
  - 업무적 의미 있음
  - 원래 존재하는 속성
- 인조키(Surrogate Key)
  - 업무적 의미 없음
  - 시스템을 위해 인위적으로 생성

---

## 📌 분석가 관점의 데이터 모델링

### 분석가에게 데이터 모델링이 중요한 이유
- 데이터가 어떤 기준으로 쪼개져 저장되어 있는지 이해
- 어떤 테이블을 JOIN 해야 하는지 판단 가능
- 지표 정의 시
  - 중복
  - 누락
  - 과대/과소 집계  
  위험을 사전에 인지 가능

📌 비유  
> **데이터베이스는 건축의 ‘설계도’와 같다**

---

### 데이터 모델링 단계

#### 개념적 모델링
- “이 비즈니스에는 어떤 데이터가 존재하는가?”
- ERD의 뼈대를 만드는 단계
- 기획자·마케터·개발자의 공통 언어

#### 논리적 모델링
- “이 데이터를 어떤 구조로 저장할 것인가?”
- 엔터티 → 테이블
- 속성 → 컬럼
- 관계 → PK / FK
- 정규화를 통해 중복 제거, 일관성 확보
- 속성과 관계가 상세히 표현된 ERD 작성

#### 물리적 모델링
- “이 구조를 실제 DB에 어떻게 구현할 것인가?”
- 특정 DBMS 환경에서 실제 구현
- 분석가는
  - 인덱스 컬럼 파악
  - 물리 모델을 읽을 수 있는 수준 필요

---

## 📌 데이터베이스 설계와 ERD

### ERD란?
- 데이터 모델링 결과를 시각적으로 표현한 설계도
- 실무 활용
  - 신규 분석 과제 시작 시 데이터 구조 파악
  - 개발자·기획자·분석가 간 데이터 구조 합의 도구

📌 실무에서는  
→ SQL 코드보다 **ERD를 먼저 보는 경우가 많음**

---

### ERD 해석 시 반드시 던져야 할 질문
- 이 테이블의 한 행은 무엇을 의미하는가?
- 이 관계는 왜 1:N인가?
- 이 구조에서 JOIN은 어디서 발생하는가?

---

### ERD 구성 요소
#### 엔터티
- 데이터로 관리해야 할 대상
- 엔터티 1개 = 테이블 1개
- 잘못 나누면
  - 테이블 비대화
  - 과도한 JOIN 발생

#### 속성
- 엔터티가 가지는 구체적인 정보
- 테이블의 컬럼
- 여러 의미가 섞인 컬럼은 정규화 대상

#### 관계
- 엔터티 간 비즈니스 규칙
- 선(Line)으로 표현
- 이 선 하나가 JOIN의 근거

---

### ERD 기호 (Crow’s Foot Notation)

#### 카디널리티 (최대 개수)
- `|` : 하나
- `<` : 다수

#### 선택성 (최소 개수)
- `O` : 선택 (0 가능)
- `|` : 필수 (1 이상)

→ NULL 발생 가능성 판단 기준

---

### 기호 조합 실무 해석
- `O|`
  → NULL이 나와도 정상
- `||`
  → JOIN해도 데이터 안전
- `O<`
  → JOIN하면 데이터 폭증
- `|<`
  → JOIN 없이는 의미 없는 데이터

---

## 📌 데이터베이스 관계 (Relationship)

### 관계란?
- 테이블 간의 논리적 연결
- 데이터가 늘어나는 방식, 사라지는 조건, NULL 발생 여부를 결정

---

### 관계를 위한 핵심 요소
- 기본키(PK): 이 행이 무엇인지 결정
- 외래키(FK): 다른 테이블의 PK 참조

📌 키는 단순 제약조건이 아니라  
→ **JOIN의 근거 + 데이터 소속 관계**

---

### 1:1 관계
- 주로 ‘분리’ 목적
  - 민감정보 분리
  - 선택적 정보 분리
  - 대용량 데이터 분리

📌 해석 포인트
- 한쪽 데이터가 없을 수 있는지 먼저 확인
- INNER JOIN 시 데이터 누락 가능

---

### 1:N 관계 ⭐ 가장 중요
- JOIN 시 반드시 행(Row)이 늘어남
- 고객 1명 + 주문 3건 → 결과 3행

📌 규칙
> **1:N 관계에서 JOIN하면 N쪽 기준으로 데이터가 늘어난다**

- COUNT(*)는 항상 “무엇을 세고 있는지” 확인

---

### M:N 관계
- 고객 ↔ 상품 = M:N
- 주문 테이블이 중계 테이블 역할
- 관계형 DB에서는
  → 반드시 중계 테이블로 구조 분해

---

### 관계 파트 핵심 요약
- SQL 오류의 대부분은
  → **관계 이해 부족에서 시작된다**
